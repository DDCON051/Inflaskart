<!DOCTYPE html>

<html lang="en">

  <head>
      <meta charset="UTF-8">
      <title>Inflaskart | {{ store.store_name }}</title>
      {% load static %}
      <link rel="stylesheet" type="text/css" href="{% static 'grocerystore/style.css' %}" />
  </head>


  <body>

    <header>

      <nav class="horiz-top-nav">

        <div class="dropdown">
          <button class="dropbutton"><a href="{% url 'grocerystore:store' zipcode store_id %}">{{ store }}</a></button>
          <div class="dropdown-content">
            {% if not request.user.is_authenticated %}
              <a href="{% url 'grocerystore:index' %}">Shop in another area</a>
            {% endif %}
            {% if available_stores %}
              <p>---Stores in {{zipcode}}---</p>
              {% for store in available_stores %}
              <a href="{% url 'grocerystore:store' zipcode store.pk %}">{{ store }}</a>
              {% endfor %}
            {% endif %}
          </div>
        </div>

        <div class="dropdown">
          <button class="dropbutton">Account</button>
          <div class="dropdown-content">
            {% if request.user.is_authenticated %}
              <a href="{% url 'grocerystore:profile' %}">Your profile</a>
              <a href="{% url 'grocerystore:logout' %}">Logout</a>
            {% else %}
              <a href="{% url 'grocerystore:login' %}">Login</a>
              <a href="{% url 'grocerystore:register' %}">Register</a>
            {% endif %}
          </div>
        </div>

        <div class="dropdown">
          <button class="dropbutton">Cart</button>
          <div class="dropdown-content">
            <a href="{% url 'grocerystore:cart' zipcode %}">View your cart</a>
            <a href="{% url 'grocerystore:checkout' zipcode store_id %}">Checkout at {{ store }}</a>
          </div>
        </div>

      </nav>

    </header>

    <main>

      <h4>'{{ subcategory }}' section at {{ store }}:</h4>

      {% if available_products %}

      <section class="available_products">
        {% for availability in available_products %}
            <ul><li><a href="{% url 'grocerystore:detail' zipcode store_id availability.product.pk %}">
              {{ availability.product }}</a>: ${{ availability.product_price }} / {{ availability.product_unit }}
              <form id="available_product" action="" method="post">
                {% csrf_token %}
                <select name="{{availability.pk}}">
                  {% for quantity in quantity_set %}
                    <option value="{{quantity}}">{{ quantity }}</option>
                  {% endfor %}
                </select>
                <input type="submit" value="Add item in cart">
              </form>
            </li></ul>
        {% endfor %}
      </section>

      {% else %}
        <p>Sorry, there's nothing available in this section.</p>
        <p>Keep shopping at <a href="{% url 'grocerystore:store' zipcode store_id %}" style="text-decoration: underline">{{ store }}</a>
      {% endif %}

      <div id="messages">
        {% if messages %}
          <div id="messages-content">
            <ul>
              {% for message in messages %}
                <li class="{{ message.tags }}">{{ message }}</li>
              {% endfor %}
            </ul>
          </div>
        {% endif %}
      </div>

    </main>

    <footer>
      <p id="footer">Contact: cowboy.de.tchernobyl@gmail.com</p>
    </footer>

  </body>

</html>
